"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[389],{5389:(I,A,l)=>{l.r(A),l.d(A,{BlogModule:()=>gt});var f=l(6814),n=l(186),x=l(9299),h=l(6505),y=l(7582),T=l(1728),v=l(8039),t=l(9212),b=l(1427),u=l(7243),d=l(4274),C=l(9515);const p=()=>["/blog/create"];function r(a,o){1&a&&(t.TgZ(0,"div",3)(1,"a",4),t._UZ(2,"i",5),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&a&&(t.xp6(1),t.Q6J("routerLink",t.DdM(4,p)),t.xp6(2),t.hij(" ",t.lcZ(4,2,"add_blog")," "))}class c{constructor(o,s){this.store=o,this.router=s,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"blog.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"blog.destroy"}],data:[],total:0}}ngOnInit(){this.blog$.subscribe(o=>{this.tableConfig.data=o?o?.data:[],this.tableConfig.total=o?o?.total:0})}onTableChange(o){this.store.dispatch(new v.$P(o)).subscribe()}onActionClicked(o){"edit"==o.actionToPerform?this.edit(o.data):"status"==o.actionToPerform?this.status(o.data):"delete"==o.actionToPerform?this.delete(o.data):"deleteAll"==o.actionToPerform&&this.deleteAll(o.data)}edit(o){this.router.navigateByUrl(`/blog/edit/${o.id}`)}status(o){this.store.dispatch(new v.VG(o.id,o.status))}delete(o){this.store.dispatch(new v.VN(o.id))}deleteAll(o){this.store.dispatch(new v.eB(o))}static#t=this.\u0275fac=function(s){return new(s||c)(t.Y36(n.yh),t.Y36(h.F0))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-blog"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableConfig","hasCheckbox","tableChanged","rowClicked","action"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(s,e){1&s&&(t.TgZ(0,"app-page-wrapper",0),t.YNc(1,r,5,5,"div",1),t.TgZ(2,"app-table",2),t.NdJ("tableChanged",function(m){return e.onTableChange(m)})("rowClicked",function(m){return e.edit(m)})("action",function(m){return e.onActionClicked(m)}),t.qZA()()),2&s&&(t.Q6J("gridClass","col-sm-12")("title","blog"),t.xp6(1),t.Q6J("hasPermission","blog.create"),t.xp6(1),t.Q6J("tableConfig",e.tableConfig)("hasCheckbox",!0))},dependencies:[h.rH,b.a,u.t,d.A,C.X$]})}(0,y.gn)([(0,n.Ph)(T.M.blog)],c.prototype,"blog$",void 0);var i=l(6223),U=l(8645),_=l(2096),S=l(4664),L=l(1631),$=l(9773),M=l(7930),w=l(4612),P=l(4197),E=l(8835),Y=l(6165),G=l(885),D=l(3092),V=l(8176),X=l(6515),j=l(2879);function O(a,o){1&a&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"title_is_required")," "))}function z(a,o){1&a&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"thumbnail_is_required")," "))}function R(a,o){1&a&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"select_category_is_required")," "))}const Q=()=>[];class B{constructor(o,s,e,g){this.store=o,this.route=s,this.router=e,this.formBuilder=g,this.selectedCategories=[],this.selectedTags=[],this.editor=M,this.config=G.v,this.destroy$=new U.x,this.store.dispatch(new P.m1({type:"post"})),this.store.dispatch(new w.zo({type:"post"})),this.form=this.formBuilder.group({title:new i.NI("",[i.kI.required]),description:new i.NI,content:new i.NI,meta_title:new i.NI,meta_description:new i.NI,blog_meta_image_id:new i.NI,blog_thumbnail_id:new i.NI("",[i.kI.required]),categories:new i.NI("",[i.kI.required]),tags:new i.NI,is_featured:new i.NI(0),is_sticky:new i.NI(0),status:new i.NI(1)})}ngOnInit(){this.route.params.pipe((0,S.w)(o=>o.id?this.store.dispatch(new v.Cc(o.id)).pipe((0,L.z)(()=>this.store.select(T.M.selectedBlog))):(0,_.of)()),(0,$.R)(this.destroy$)).subscribe(o=>{this.id=o?.id,this.selectedCategories=o?.categories.map(s=>s?.id),this.selectedTags=o?.tags.map(s=>s?.id),this.form.patchValue({title:o?.title,description:o?.description,content:o?.content,blog_thumbnail_id:o?.blog_thumbnail_id,categories:this.selectedCategories,tags:this.selectedTags,meta_title:o?.meta_title,meta_description:o?.meta_description,is_featured:o?.is_featured,is_sticky:o?.is_sticky,status:o?.status})})}selectThumbnail(o){Array.isArray(o)||this.form.controls.blog_thumbnail_id.setValue(o?o.id:"")}selectMetaImage(o){Array.isArray(o)||this.form.controls.blog_meta_image_id.setValue(o?o.id:null)}selectCategoryItem(o){Array.isArray(o)&&this.form.controls.categories.setValue(o)}selectTagItem(o){Array.isArray(o)&&this.form.controls.tags.setValue(o)}submit(){this.form.markAllAsTouched();let o=new v.AE(this.form.value);"edit"==this.type&&this.id&&(o=new v.Wf(this.form.value,this.id)),this.form.valid&&this.store.dispatch(o).subscribe({complete:()=>{this.router.navigateByUrl("/blog")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(s){return new(s||B)(t.Y36(n.yh),t.Y36(h.gz),t.Y36(h.F0),t.Y36(i.qu))};static#e=this.\u0275cmp=t.Xpm({type:B,selectors:[["app-form-blog"]],inputs:{type:"type"},decls:50,vars:84,consts:[[1,"theme-form","theme-form-2","mega-form",3,"formGroup","ngSubmit"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],["formControlName","content",3,"editor","config"],[3,"multipleImage","image","helpText","selectedFiles"],[3,"position","selectedOption","options","subArrayKey","selectedItem"],[3,"position","selectedOption","options","selectedItem"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","is_featured","formControlName","is_featured"],[1,"switch-state"],["type","checkbox","id","is_sticky","formControlName","is_sticky"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"multipleImage","image","selectedFiles"],["type","checkbox","id","status","formControlName","status"],[3,"id"],[1,"invalid-feedback"]],template:function(s,e){if(1&s&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return e.submit()}),t.TgZ(1,"app-form-fields",1),t._UZ(2,"input",2),t.ALo(3,"translate"),t.YNc(4,O,3,3,"div",3),t.qZA(),t.TgZ(5,"app-form-fields",1),t._UZ(6,"textarea",4),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"app-form-fields",1),t._UZ(9,"ckeditor",5),t.qZA(),t.TgZ(10,"app-form-fields",1)(11,"app-image-upload",6),t.NdJ("selectedFiles",function(m){return e.selectThumbnail(m)}),t.ALo(12,"async"),t.qZA(),t.YNc(13,z,3,3,"div",3),t.qZA(),t.TgZ(14,"app-form-fields",1)(15,"app-advanced-dropdown",7),t.NdJ("selectedItem",function(m){return e.selectCategoryItem(m)}),t.ALo(16,"async"),t.ALo(17,"async"),t.qZA(),t.YNc(18,R,3,3,"div",3),t.qZA(),t.TgZ(19,"app-form-fields",1)(20,"app-advanced-dropdown",8),t.NdJ("selectedItem",function(m){return e.selectTagItem(m)}),t.ALo(21,"async"),t.ALo(22,"async"),t.qZA()(),t.TgZ(23,"app-form-fields",1)(24,"div",9)(25,"label",10),t._UZ(26,"input",11)(27,"span",12),t.qZA()()(),t.TgZ(28,"app-form-fields",1)(29,"div",9)(30,"label",10),t._UZ(31,"input",13)(32,"span",12),t.qZA()()(),t.TgZ(33,"app-form-fields",1),t._UZ(34,"input",14),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"app-form-fields",1),t._UZ(37,"textarea",15),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"app-form-fields",1)(40,"app-image-upload",16),t.NdJ("selectedFiles",function(m){return e.selectMetaImage(m)}),t.ALo(41,"async"),t.qZA()(),t.TgZ(42,"app-form-fields",1)(43,"div",9)(44,"label",10),t._UZ(45,"input",17)(46,"span",12),t.qZA()()(),t.TgZ(47,"app-button",18),t._uU(48),t.ALo(49,"translate"),t.qZA()()),2&s){let g,m,J,N;t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("label","title")("for","title")("required",!0),t.xp6(1),t.s9C("placeholder",t.lcZ(3,60,"enter_blog_title")),t.xp6(2),t.Q6J("ngIf",e.form.controls.title.touched&&(null==e.form.controls.title.errors?null:e.form.controls.title.errors.required)),t.xp6(1),t.Q6J("label","description")("for","desc")("required",!1),t.xp6(1),t.s9C("placeholder",t.lcZ(7,62,"enter_blog_description")),t.xp6(2),t.Q6J("label","content")("for","content")("required",!1),t.xp6(1),t.Q6J("editor",e.editor)("config",e.config),t.xp6(1),t.Q6J("label","thumbnail")("for","image")("required",!0),t.xp6(1),t.Q6J("multipleImage",!1)("image",null==(g=t.lcZ(12,64,e.blog$))?null:g.blog_thumbnail)("helpText","*Upload image size 1500x700px recommended"),t.xp6(2),t.Q6J("ngIf",e.form.controls.blog_thumbnail_id.touched&&(null==e.form.controls.blog_thumbnail_id.errors?null:e.form.controls.blog_thumbnail_id.errors.required)),t.xp6(1),t.Q6J("label","select_categories")("for","category")("required",!0),t.xp6(1),t.Q6J("position","top")("selectedOption",e.selectedCategories)("options",null!=(m=t.lcZ(16,66,e.category$))&&null!=m.data&&m.data.length?null==(m=t.lcZ(17,68,e.category$))?null:m.data:t.DdM(82,Q))("subArrayKey","subcategories"),t.xp6(3),t.Q6J("ngIf",e.form.controls.categories.touched&&(null==e.form.controls.categories.errors?null:e.form.controls.categories.errors.required)),t.xp6(1),t.Q6J("label","select_tags")("for","tag")("required",!1),t.xp6(1),t.Q6J("position","top")("selectedOption",e.selectedTags)("options",null!=(J=t.lcZ(21,70,e.tag$))&&null!=J.data&&J.data.length?null==(J=t.lcZ(22,72,e.tag$))?null:J.data:t.DdM(83,Q)),t.xp6(3),t.Q6J("label","featured")("for","is_featured")("required",!1),t.xp6(5),t.Q6J("label","sticky")("for","is_sticky")("required",!1),t.xp6(5),t.Q6J("label","meta_title")("for","meta_title")("required",!1),t.xp6(1),t.s9C("placeholder",t.lcZ(35,74,"enter_meta_title")),t.xp6(2),t.Q6J("label","meta_description")("for","meta_description")("required",!1),t.xp6(1),t.s9C("placeholder",t.lcZ(38,76,"enter_meta_description")),t.xp6(2),t.Q6J("label","meta_image")("for","meta_image")("required",!1),t.xp6(1),t.Q6J("multipleImage",!1)("image",null==(N=t.lcZ(41,78,e.blog$))?null:N.blog_meta_image),t.xp6(2),t.Q6J("label","status")("for","status")("required",!1),t.xp6(5),t.Q6J("id","blog_btn"),t.xp6(1),t.hij(" ",t.lcZ(49,80,"create"==e.type?"save_blog":"update_blog")," ")}},dependencies:[f.O5,i._Y,i.Fj,i.Wl,i.JJ,i.JL,i.sg,i.u,D.L,V.J,X.l,j.r,x.u,f.Ov,C.X$]})}(0,y.gn)([(0,n.Ph)(T.M.selectedBlog)],B.prototype,"blog$",void 0),(0,y.gn)([(0,n.Ph)(E.O.category)],B.prototype,"category$",void 0),(0,y.gn)([(0,n.Ph)(Y.R.tag)],B.prototype,"tag$",void 0);let W=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-create-blog"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(e,g){1&e&&(t.TgZ(0,"app-page-wrapper",0),t._UZ(1,"app-form-blog",1),t.qZA()),2&e&&(t.Q6J("title","create_blog"),t.xp6(1),t.Q6J("type","create"))},dependencies:[u.t,B]})}return a})(),K=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-edit-blog"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(e,g){1&e&&(t.TgZ(0,"app-page-wrapper",0),t._UZ(1,"app-form-blog",1),t.qZA()),2&e&&(t.Q6J("title","edit_blog"),t.xp6(1),t.Q6J("type","edit"))},dependencies:[u.t,B]})}return a})();var H=l(9966);let q=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-blog-category"]],decls:1,vars:1,consts:[[3,"categoryType"]],template:function(e,g){1&e&&t._UZ(0,"app-category",0),2&e&&t.Q6J("categoryType","post")},dependencies:[H.m]})}return a})();var k=l(8817);let tt=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-edit-blog-category"]],decls:1,vars:1,consts:[[3,"categoryType"]],template:function(e,g){1&e&&t._UZ(0,"app-edit-category",0),2&e&&t.Q6J("categoryType","post")},dependencies:[k.q]})}return a})();var et=l(5780);let ot=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(e,g){1&e&&t._UZ(0,"app-tag",0),2&e&&t.Q6J("tagType","post")},dependencies:[et.Z]})}return a})();var at=l(7175);let lt=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-create-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(e,g){1&e&&t._UZ(0,"app-create-tag",0),2&e&&t.Q6J("tagType","post")},dependencies:[at.N]})}return a})();var st=l(6812);let it=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-edit-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(e,g){1&e&&t._UZ(0,"app-edit-tag",0),2&e&&t.Q6J("tagType","post")},dependencies:[st.o]})}return a})();var Z=l(5419);const nt=[{path:"",component:c,canActivate:[Z.n],data:{permission:"blog.index"}},{path:"create",component:W,canActivate:[Z.n],data:{permission:["blog.index","blog.create"]}},{path:"edit/:id",component:K,canActivate:[Z.n],data:{permission:["blog.index","blog.edit"]}},{path:"category",component:q,canActivate:[Z.n],data:{permission:["category.index"]}},{path:"category/edit/:id",component:tt,canActivate:[Z.n],data:{permission:["category.index","category.create"]}},{path:"tag",component:ot,canActivate:[Z.n],data:{permission:["tag.index"]}},{path:"tag/create",component:lt,canActivate:[Z.n],data:{permission:["tag.create"]}},{path:"tag/edit/:id",component:it,canActivate:[Z.n],data:{permission:["tag.edit"]}}];let rt=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(nt),h.Bz]})}return a})();var ct=l(6208),pt=l(8071),dt=l(1952);let gt=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[f.ez,rt,ct.m,pt.CategoryModule,dt.TagModule,n.$l.forFeature([T.M]),x.d]})}return a})()},8039:(I,A,l)=>{l.d(A,{$P:()=>f,AE:()=>n,Cc:()=>x,VG:()=>y,VN:()=>T,Wf:()=>h,eB:()=>v});let f=(()=>{class t{static#t=this.type="[Blog] Get";constructor(u){this.payload=u}}return t})(),n=(()=>{class t{static#t=this.type="[Blog] Create";constructor(u){this.payload=u}}return t})(),x=(()=>{class t{static#t=this.type="[Blog] Edit";constructor(u){this.id=u}}return t})(),h=(()=>{class t{static#t=this.type="[Blog] Update";constructor(u,d){this.payload=u,this.id=d}}return t})(),y=(()=>{class t{static#t=this.type="[Blog] Update Status";constructor(u,d){this.id=u,this.status=d}}return t})(),T=(()=>{class t{static#t=this.type="[Blog] Delete";constructor(u){this.id=u}}return t})(),v=(()=>{class t{static#t=this.type="[Blog] Delete All";constructor(u){this.ids=u}}return t})()},1728:(I,A,l)=>{l.d(A,{M:()=>d});var f=l(7582),n=l(186),x=l(9397),h=l(8039),y=l(9212),T=l(3477),v=l(553),t=l(9862);let b=(()=>{class C{constructor(r){this.http=r}getBlogs(r){return this.http.get(`${v.N.URL}/blog.json`,{params:r})}static#t=this.\u0275fac=function(c){return new(c||C)(y.LFG(t.eN))};static#e=this.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})(),d=class F{constructor(p,r,c){this.store=p,this.notificationService=r,this.blogService=c}static blog(p){return p.blog}static blogs(p){return p.blog.data.map(r=>({label:r?.title,value:r?.id}))}static selectedBlog(p){return p.selectedBlog}getBlogs(p,r){return this.blogService.getBlogs(r.payload).pipe((0,x.b)({next:c=>{p.patchState({blog:{data:c.data,total:c?.total?c?.total:c.data?.length}})},error:c=>{throw new Error(c?.error?.message)}}))}create(p,r){}edit(p,{id:r}){const c=p.getState(),i=c.blog.data.find(U=>U.id==r);p.patchState({...c,selectedBlog:i})}update(p,{}){}updateStatus(p,{}){}delete(p,{}){}deleteAll(p,{}){}static#t=this.\u0275fac=function(r){return new(r||F)(y.LFG(n.yh),y.LFG(T.g),y.LFG(b))};static#e=this.\u0275prov=y.Yz7({token:F,factory:F.\u0275fac})};(0,f.gn)([(0,n.aU)(h.$P)],d.prototype,"getBlogs",null),(0,f.gn)([(0,n.aU)(h.AE)],d.prototype,"create",null),(0,f.gn)([(0,n.aU)(h.Cc)],d.prototype,"edit",null),(0,f.gn)([(0,n.aU)(h.Wf)],d.prototype,"update",null),(0,f.gn)([(0,n.aU)(h.VG)],d.prototype,"updateStatus",null),(0,f.gn)([(0,n.aU)(h.VN)],d.prototype,"delete",null),(0,f.gn)([(0,n.aU)(h.eB)],d.prototype,"deleteAll",null),(0,f.gn)([(0,n.Qf)()],d,"blog",null),(0,f.gn)([(0,n.Qf)()],d,"blogs",null),(0,f.gn)([(0,n.Qf)()],d,"selectedBlog",null),d=(0,f.gn)([(0,n.ZM)({name:"blog",defaults:{blog:{data:[],total:0},selectedBlog:null}})],d)}}]);