"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[581],{581:(C,p,e)=>{e.r(p),e.d(p,{ReviewModule:()=>F});var d=e(6814),u=e(186),m=e(6505),g=e(7582),n=e(5839),h=e(3899),a=e(9212),c=e(1427),v=e(7243);class s{constructor(t){this.store=t,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"image",dataField:"product_review_image",class:"tbl-image",type:"image",placeholder:"assets/images/product.png"},{title:"consumer_name",dataField:"consumer_name"},{title:"product_name",dataField:"product_name"},{title:"rating",dataField:"rating",type:"rating",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"review.destroy"}],data:[],total:0},this.store.dispatch(new h.bG)}ngOnInit(){this.review$.subscribe(t=>{let r=t?.data?.filter(i=>(i.product_review_image=i?.product?.product_thumbnail,i.consumer_name=i?.consumer?.name,i.product_name=i?.product?.name,i));this.tableConfig.data=t?r:[],this.tableConfig.total=t?t.total:0})}onTableChange(t){this.store.dispatch(new h.bG(t))}onActionClicked(t){"delete"==t.actionToPerform?this.delete(t.data):"deleteAll"==t.actionToPerform&&this.deleteAll(t.data)}delete(t){this.store.dispatch(new h.jZ(t.id))}deleteAll(t){this.store.dispatch(new h.wx(t))}static#t=this.\u0275fac=function(r){return new(r||s)(a.Y36(u.yh))};static#e=this.\u0275cmp=a.Xpm({type:s,selectors:[["app-review"]],decls:2,vars:4,consts:[[3,"gridClass","title"],[3,"tableConfig","hasCheckbox","tableChanged","action"]],template:function(r,i){1&r&&(a.TgZ(0,"app-page-wrapper",0)(1,"app-table",1),a.NdJ("tableChanged",function(f){return i.onTableChange(f)})("action",function(f){return i.onActionClicked(f)}),a.qZA()()),2&r&&(a.Q6J("gridClass","col-sm-12")("title","reviews"),a.xp6(1),a.Q6J("tableConfig",i.tableConfig)("hasCheckbox",!0))},dependencies:[c.a,v.t]})}(0,g.gn)([(0,u.Ph)(n.m.review)],s.prototype,"review$",void 0);var l=e(5419);const y=[{path:"",component:s,canActivate:[l.n],data:{permission:"review.index"}}];let A=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=a.oAB({type:o});static#a=this.\u0275inj=a.cJS({imports:[m.Bz.forChild(y),m.Bz]})}return o})();var b=e(6208);let F=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=a.oAB({type:o});static#a=this.\u0275inj=a.cJS({imports:[d.ez,A,u.$l.forFeature([n.m]),b.m]})}return o})()},5419:(C,p,e)=>{e.d(p,{n:()=>g});var d=e(9212),u=e(186),m=e(6505);let g=(()=>{class n{constructor(a,c){this.store=a,this.router=c}canActivate(a,c){const v=this.store.selectSnapshot(l=>l.account).permissions?.map(l=>l?.name),s=a.data?.permission;return!!(!s||!Array.isArray(s)&&v?.includes(s)||Array.isArray(s)&&s?.length&&s.every(l=>v?.includes(l)))||(this.router.navigate(["/error/403"]),!1)}static#t=this.\u0275fac=function(c){return new(c||n)(d.LFG(u.yh),d.LFG(m.F0))};static#e=this.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);