"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[886],{5886:(M,w,i)=>{i.r(w),i.d(w,{QuestionsAnswersModule:()=>j});var h=i(6814),l=i(186),y=i(6505),d=i(7582);let g=(()=>{class n{static#t=this.type="[Question] Get";constructor(e){this.payload=e}}return n})(),C=(()=>{class n{static#t=this.type="[Question] Edit";constructor(e){this.id=e}}return n})(),v=(()=>{class n{static#t=this.type="[Question] put";constructor(e,s){this.payload=e,this.id=s}}return n})(),P=(()=>{class n{static#t=this.type="[Question] Delete";constructor(e){this.id=e}}return n})(),Q=(()=>{class n{static#t=this.type="[Question] Delete All";constructor(e){this.ids=e}}return n})();var u=i(9397),t=i(9212),c=i(3477),a=i(553),r=i(9862);let p=(()=>{class n{constructor(e){this.http=e}getQuestionAnswers(e){return this.http.get(`${a.N.URL}/questions.json`,e)}static#t=this.\u0275fac=function(s){return new(s||n)(t.LFG(r.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),f=class U{constructor(o,e,s){this.store=o,this.notificationService=e,this.questionsAnswersService=s}static questionAnswers(o){return o.question}static selectedQuestionAnswers(o){return o.selectedQuestion}getQuestionAnswers(o,e){return this.questionsAnswersService.getQuestionAnswers(e.payload).pipe((0,u.b)({next:s=>{o.patchState({question:{data:s.data,total:s?.total?s?.total:s.data?.length}})},error:s=>{throw new Error(s?.error?.message)}}))}edit(o,{id:e}){const s=o.getState(),m=s.question.data.find(A=>A.id==e);o.patchState({...s,selectedQuestion:m})}update(o,{}){}delete(o,{}){}deleteAll(o,{}){}static#t=this.\u0275fac=function(e){return new(e||U)(t.LFG(l.yh),t.LFG(c.g),t.LFG(p))};static#e=this.\u0275prov=t.Yz7({token:U,factory:U.\u0275fac})};(0,d.gn)([(0,l.aU)(g)],f.prototype,"getQuestionAnswers",null),(0,d.gn)([(0,l.aU)(C)],f.prototype,"edit",null),(0,d.gn)([(0,l.aU)(v)],f.prototype,"update",null),(0,d.gn)([(0,l.aU)(P)],f.prototype,"delete",null),(0,d.gn)([(0,l.aU)(Q)],f.prototype,"deleteAll",null),(0,d.gn)([(0,l.Qf)()],f,"questionAnswers",null),(0,d.gn)([(0,l.Qf)()],f,"selectedQuestionAnswers",null),f=(0,d.gn)([(0,l.ZM)({name:"question",defaults:{question:{data:[],total:0},selectedQuestion:null}})],f);var F=i(1427),G=i(7243),D=i(5861),b=i(6223),Z=i(3026),L=i(2879),R=i(9515);const J=["answersModal"];function E(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"h3",2),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-button",3),t.NdJ("click",function(){const A=t.CHM(e).$implicit;return t.KtG(A.dismiss("Cross click"))}),t._UZ(5,"i",4),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"table",7)(9,"tbody")(10,"tr")(11,"td",8),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"td",9),t._uU(15),t.qZA()(),t.TgZ(16,"tr")(17,"td",8),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"td",9),t._UZ(21,"textarea",10),t.qZA()()()()(),t.TgZ(22,"div")(23,"div",11)(24,"app-button",12),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"app-button",13),t.NdJ("click",function(){t.CHM(e);const m=t.oxw();return t.KtG(m.submit())}),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,17,"Answers")),t.xp6(2),t.Tol("btn btn-close"),t.Q6J("spinner",!1)("id","payout_close_btn"),t.xp6(8),t.Oqu(t.lcZ(13,19,"Question")),t.xp6(3),t.hij(" ",null==e.qna?null:e.qna.question," "),t.xp6(3),t.Oqu(t.lcZ(19,21,"Answers")),t.xp6(3),t.Q6J("formControl",e.answers),t.xp6(3),t.Tol("btn-md fw-bold btn btn-secondary"),t.Q6J("id","close_answers_modal_btn"),t.xp6(1),t.hij(" ",t.lcZ(26,23,"Close")," "),t.xp6(2),t.Tol("btn-theme btn-md fw-bold btn"),t.Q6J("id","submit_answers_btn"),t.xp6(1),t.hij(" ",t.lcZ(29,25,"submit")," ")}}let Y=(()=>{class n{constructor(e,s){this.modalService=e,this.store=s,this.modalOpen=!1,this.answers=new b.NI("",[b.kI.required])}openModal(e){var s=this;return(0,D.Z)(function*(){s.modalOpen=!0,s.qna=e,s.answers.patchValue(e.answer?e.answer:""),s.modalService.open(s.AnswersModal,{ariaLabelledBy:"Payout-Modal",centered:!0,windowClass:"theme-modal text-center"}).result.then(m=>{s.closeResult=`Closed with: ${m}`},m=>{s.closeResult=`Dismissed ${s.getDismissReason(m)}`})})()}getDismissReason(e){return e===Z.If.ESC?"by pressing ESC":e===Z.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}submit(){this.answers.markAllAsTouched(),this.answers.valid&&this.store.dispatch(new v({question:this.qna.question,answer:this.answers.value,product_id:this.qna.product_id},this.qna.id)).subscribe({complete:()=>{this.modalService.dismissAll()}})}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(Z.FF),t.Y36(l.yh))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-answers-modal"]],viewQuery:function(s,m){if(1&s&&t.Gf(J,5),2&s){let A;t.iGM(A=t.CRH())&&(m.AnswersModal=A.first)}},decls:2,vars:0,consts:[["answersModal",""],[1,"modal-header"],[1,"mb-1","fw-semibold"],[3,"spinner","id","click"],[1,"ri-close-line"],[1,"modal-body","qa-modal"],[1,"border","rounded-3","mb-4"],[1,"table","all-package","theme-table","no-footer"],[1,"text-start","fw-semibold"],[1,"text-start"],["placeholder","Enter Answers",1,"form-control",3,"formControl"],[1,"button-box"],[3,"id"],[3,"id","click"]],template:function(s,m){1&s&&t.YNc(0,E,30,27,"ng-template",null,0,t.W1O)},dependencies:[b.Fj,b.JJ,b.oH,L.r,R.X$]})}return n})();const $=["answersModal"];class S{constructor(o,e){this.store=o,this.router=e,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"Question",dataField:"question"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"store.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"store.destroy"}],data:[],total:0}}ngOnInit(){this.questionAnswers$.subscribe(o=>{this.tableConfig.data=o.data?o.data:[],this.tableConfig.total=o?.total?o?.total:0})}onTableChange(o){this.store.dispatch(new g(o))}onActionClicked(o){"edit"==o.actionToPerform?this.AnswersModal.openModal(o.data):"delete"==o.actionToPerform?this.delete(o.data):"deleteAll"==o.actionToPerform&&this.deleteAll(o.data)}delete(o){this.store.dispatch(new P(o.id))}deleteAll(o){this.store.dispatch(new Q(o))}static#t=this.\u0275fac=function(e){return new(e||S)(t.Y36(l.yh),t.Y36(y.F0))};static#e=this.\u0275cmp=t.Xpm({type:S,selectors:[["app-questions-answers"]],viewQuery:function(e,s){if(1&e&&t.Gf($,5),2&e){let m;t.iGM(m=t.CRH())&&(s.AnswersModal=m.first)}},decls:4,vars:4,consts:[[3,"gridClass","title"],[3,"tableConfig","hasCheckbox","tableChanged","action"],["answersModal",""]],template:function(e,s){1&e&&(t.TgZ(0,"app-page-wrapper",0)(1,"app-table",1),t.NdJ("tableChanged",function(A){return s.onTableChange(A)})("action",function(A){return s.onActionClicked(A)}),t.qZA()(),t._UZ(2,"app-answers-modal",null,2)),2&e&&(t.Q6J("gridClass","col-sm-12")("title","Q&A"),t.xp6(1),t.Q6J("tableConfig",s.tableConfig)("hasCheckbox",!0))},dependencies:[F.a,G.t,Y]})}(0,d.gn)([(0,l.Ph)(f.questionAnswers)],S.prototype,"questionAnswers$",void 0);const q=[{path:"",component:S}];let B=(()=>{class n{static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275mod=t.oAB({type:n});static#s=this.\u0275inj=t.cJS({imports:[y.Bz.forChild(q),y.Bz]})}return n})();var N=i(6208),O=i(5745);let j=(()=>{class n{static#t=this.\u0275fac=function(s){return new(s||n)};static#e=this.\u0275mod=t.oAB({type:n});static#s=this.\u0275inj=t.cJS({imports:[h.ez,B,N.m,l.$l.forFeature([f,O.o])]})}return n})()},3896:(M,w,i)=>{i.d(w,{A5:()=>g,Bs:()=>P,JV:()=>Q,K2:()=>v,T:()=>d,ef:()=>C,mB:()=>y,tY:()=>l,xo:()=>h});let h=(()=>{class u{static#t=this.type="[Product] Get";constructor(c){this.payload=c}}return u})(),l=(()=>{class u{static#t=this.type="[Product] Create";constructor(c){this.payload=c}}return u})(),y=(()=>{class u{static#t=this.type="[Product] Edit";constructor(c){this.id=c}}return u})(),d=(()=>{class u{static#t=this.type="[Product] Update";constructor(c,a){this.payload=c,this.id=a}}return u})(),g=(()=>{class u{static#t=this.type="[Product] Update Status";constructor(c,a){this.id=c,this.status=a}}return u})(),C=(()=>{class u{static#t=this.type="[Product] Approve Status";constructor(c,a){this.id=c,this.status=a}}return u})(),v=(()=>{class u{static#t=this.type="[Product] Delete";constructor(c){this.id=c}}return u})(),P=(()=>{class u{static#t=this.type="[Product] Delete All";constructor(c){this.ids=c}}return u})(),Q=(()=>{class u{static#t=this.type="[Product] Replicate";constructor(c){this.ids=c}}return u})()},5745:(M,w,i)=>{i.d(w,{o:()=>t});var h=i(7582),l=i(186),y=i(9397),d=i(3896),g=i(9212),C=i(3477),v=i(553),P=i(9862);let Q=(()=>{class c{constructor(r){this.http=r}getProducts(r){return this.http.get(`${v.N.URL}/product.json`,{params:r})}static#t=this.\u0275fac=function(p){return new(p||c)(g.LFG(P.eN))};static#e=this.\u0275prov=g.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),t=class T{constructor(a,r,p){this.store=a,this.notificationService=r,this.productService=p}static product(a){return a.product}static products(a){return a.product.data.filter(r=>r.id!==a.selectedProduct?.id).map(r=>({label:r?.name,value:r?.id,data:{type:r.type,name:r.name,slug:r.slug,stock_status:r.stock_status,image:r.product_thumbnail?r.product_thumbnail.original_url:"assets/images/product.png"}}))}static selectedProduct(a){return a.selectedProduct}static topSellingProducts(a){return a.topSellingProducts}getProducts(a,r){return this.productService.getProducts(r.payload).pipe((0,y.b)({next:p=>{if(r?.payload.top_selling){const x=a.getState();a.patchState({...x,topSellingProducts:p?.data?.slice(0,7)})}else a.patchState({product:{data:p?.data,total:p?.total?p?.total:p.data?.length}})},error:p=>{throw new Error(p?.error?.message)}}))}create(a,r){}edit(a,{id:r}){const p=a.getState(),x=p.product.data.find(f=>f.id==r);a.patchState({...p,selectedProduct:x})}update(a,{}){}updateStatus(a,{}){}approveStatus(a,{}){}delete(a,{}){}deleteAll(a,{}){}replicateProduct(a,{}){}static#t=this.\u0275fac=function(r){return new(r||T)(g.LFG(l.yh),g.LFG(C.g),g.LFG(Q))};static#e=this.\u0275prov=g.Yz7({token:T,factory:T.\u0275fac})};(0,h.gn)([(0,l.aU)(d.xo)],t.prototype,"getProducts",null),(0,h.gn)([(0,l.aU)(d.tY)],t.prototype,"create",null),(0,h.gn)([(0,l.aU)(d.mB)],t.prototype,"edit",null),(0,h.gn)([(0,l.aU)(d.T)],t.prototype,"update",null),(0,h.gn)([(0,l.aU)(d.A5)],t.prototype,"updateStatus",null),(0,h.gn)([(0,l.aU)(d.ef)],t.prototype,"approveStatus",null),(0,h.gn)([(0,l.aU)(d.K2)],t.prototype,"delete",null),(0,h.gn)([(0,l.aU)(d.Bs)],t.prototype,"deleteAll",null),(0,h.gn)([(0,l.aU)(d.JV)],t.prototype,"replicateProduct",null),(0,h.gn)([(0,l.Qf)()],t,"product",null),(0,h.gn)([(0,l.Qf)()],t,"products",null),(0,h.gn)([(0,l.Qf)()],t,"selectedProduct",null),(0,h.gn)([(0,l.Qf)()],t,"topSellingProducts",null),t=(0,h.gn)([(0,l.ZM)({name:"product",defaults:{product:{data:[],total:0},selectedProduct:null,topSellingProducts:[]}})],t)}}]);