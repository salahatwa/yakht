"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[849],{6583:(w,E,a)=>{a.d(E,{Z:()=>d});var c=a(7582),e=a(9212),m=a(6814),C=a(186),h=a(6223),u=a(3620),A=a(3997),v=a(2614),x=a(1045),f=a(3026),T=a(9185),O=a(1570),Z=a(6735),D=a(5744),P=a(4274),b=a(9515);const U=["deleteModal"];function L(i,o){1&i&&(e.TgZ(0,"div",15),e._UZ(1,"app-loader",16),e.qZA()),2&i&&(e.xp6(1),e.Q6J("loaderClass","custom-loader-wrapper"))}function B(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"div",27)(1,"a",28),e._UZ(2,"i",29),e.qZA(),e.TgZ(3,"ul",30)(4,"a",31),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2).$implicit,g=e.oxw(3);return e.KtG(g.DeleteModal.openModal("delete",r))}),e._UZ(5,"i",32),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}2&i&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"delete")," "))}function y(i,o){if(1&i&&(e.ynx(0),e.YNc(1,B,8,3,"div",26),e.BQk()),2&i){const n=e.oxw(4);e.xp6(1),e.Q6J("ngIf",n.deleteAction)}}function s(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"div")(1,"div",20)(2,"input",21),e.NdJ("change",function(r){const I=e.CHM(n).$implicit,K=e.oxw(3);return e.KtG(K.selectImage(r,I,K.url))}),e.qZA(),e.TgZ(3,"label",22)(4,"div",23),e._UZ(5,"img",24),e.qZA()(),e.YNc(6,y,2,1,"ng-container",25),e.qZA()()}if(2&i){const n=o.$implicit,l=e.oxw(3);e.xp6(2),e.s9C("type",l.multiple?"checkbox":"radio"),e.MGl("id","attachment-",null==n?null:n.id,""),e.Q6J("value",null==n?null:n.id),e.xp6(1),e.MGl("for","attachment-",null==n?null:n.id,""),e.xp6(2),e.Q6J("src",n.original_url,e.LSH),e.xp6(1),e.Q6J("hasPermission","attachment.destroy")}}function M(i,o){if(1&i&&(e.TgZ(0,"div",18),e.YNc(1,s,7,6,"div",19),e.ALo(2,"async"),e.qZA()),2&i){const n=e.oxw(2);let l;e.xp6(1),e.Q6J("ngForOf",null==(l=e.lcZ(2,1,n.attachment$))?null:l.data)}}function t(i,o){if(1&i&&(e.YNc(0,M,3,3,"div",17),e.ALo(1,"async")),2&i){const n=e.oxw();let l;e.Q6J("ngIf",null==(l=e.lcZ(1,1,n.attachment$))||null==l.data?null:l.data.length)}}function _(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"nav",33)(1,"app-pagination",34),e.NdJ("setPage",function(r){e.CHM(n);const g=e.oxw();return e.KtG(g.setPaginate(r))}),e.qZA()()}if(2&i){const n=e.oxw();e.xp6(1),e.Q6J("total",n.totalItems)("currentPage",n.filter.page)("pageSize",n.filter.paginate)}}function p(i,o){1&i&&e._UZ(0,"app-no-data",35),2&i&&e.Q6J("image","assets/svg/no-media.svg")("text","No Media Found")}class d{constructor(o,n,l){this.store=o,this.document=n,this.renderer=l,this.selectedImages=[],this.multiple=!1,this.url=!1,this.loading=!0,this.deleteAction=!0,this.setImage=new e.vpe,this.setDeleteImage=new e.vpe,this.term=new h.NI,this.filter={search:"",field:"",sort:"",page:1,paginate:48},this.totalItems=0,this.attachment$.subscribe(r=>this.totalItems=r?.total),this.getAttachments(this.filter,!0),this.term.valueChanges.pipe((0,u.b)(400),(0,A.x)()).subscribe(r=>{this.filter.search=r,this.getAttachments(this.filter)})}getAttachments(o,n){this.loading=!0,this.store.dispatch(new x.lg(o)).subscribe({complete:()=>{this.loading=!1}}),n||this.renderer.addClass(this.document.body,"loader-none")}onMediaChange(o){this.filter.sort=o.target.value,this.getAttachments(this.filter)}onActionClicked(o,n){"delete"==o&&this.store.dispatch(new x.nS(n.id)).subscribe({complete:()=>{this.setDeleteImage.emit(n.id)}})}selectImage(o,n,l){if(this.multiple){const r=this.selectedImages.indexOf(n);o.target.checked?-1==r&&this.selectedImages.push(n):this.selectedImages=this.selectedImages.filter(g=>g.id!=parseInt(o.target.value))}else this.selectedImages=n;l&&(this.selectedImages=n),this.setImage.emit(this.selectedImages)}setPaginate(o){this.filter.page=o,this.getAttachments(this.filter)}ngOnDestroy(){this.renderer.removeClass(this.document.body,"loader-none")}static#e=this.\u0275fac=function(n){return new(n||d)(e.Y36(C.yh),e.Y36(m.K0),e.Y36(e.Qsj))};static#t=this.\u0275cmp=e.Xpm({type:d,selectors:[["app-media-box"]],viewQuery:function(n,l){if(1&n&&e.Gf(U,5),2&n){let r;e.iGM(r=e.CRH())&&(l.DeleteModal=r.first)}},inputs:{selectedImages:"selectedImages",multiple:"multiple",url:"url",loading:"loading",deleteAction:"deleteAction"},outputs:{setImage:"setImage",setDeleteImage:"setDeleteImage"},decls:30,vars:27,consts:[[1,"select-top-panel"],["type","text",1,"form-control",3,"placeholder","formControl"],[1,"form-select",3,"change"],["value",""],["value","newest"],["value","oldest"],["value","smallest"],["value","largest"],[1,"content-section","select-file-section","py-0","ratio2_3","custom-box-loader"],["class","box-loader",4,"ngIf","ngIfElse"],["mediaContent",""],["class","custom-pagination",4,"ngIf"],[3,"image","text",4,"ngIf"],[3,"deleteItem"],["deleteModal",""],[1,"box-loader"],[3,"loaderClass"],["class","row row-cols-xxl-6 row-cols-xl-5 row-cols-lg-4 row-cols-sm-3 row-cols-2 g-sm-3 g-2 media-library-sec ratio_square",4,"ngIf"],[1,"row","row-cols-xxl-6","row-cols-xl-5","row-cols-lg-4","row-cols-sm-3","row-cols-2","g-sm-3","g-2","media-library-sec","ratio_square"],[4,"ngFor","ngForOf"],[1,"library-box"],["name","attachment",1,"media-checkbox",3,"type","value","id","change"],[3,"for"],[1,"ratio","ratio-1x1"],["alt","attachment",1,"img-fluid",3,"src"],[4,"hasPermission"],["ngbDropdown","","class","dropdown",4,"ngIf"],["ngbDropdown","",1,"dropdown"],["href","javascript:void(0)","ngbDropdownToggle",""],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["ngbDropdownItem","",1,"d-flex","align-items-center",3,"click"],[1,"ri-delete-bin-line","me-2"],[1,"custom-pagination"],[3,"total","currentPage","pageSize","setPage"],[3,"image","text"]],template:function(n,l){if(1&n&&(e.TgZ(0,"div",0)(1,"div"),e._UZ(2,"input",1),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",2),e.NdJ("change",function(g){return l.onMediaChange(g)}),e.TgZ(5,"option",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"option",4),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"option",5),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"option",6),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"option",7),e._uU(18),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"div",8),e.YNc(21,L,2,1,"div",9)(22,t,2,3,"ng-template",null,10,e.W1O)(24,_,2,3,"nav",11),e.ALo(25,"async"),e.YNc(26,p,1,2,"app-no-data",12),e.ALo(27,"async"),e.qZA(),e.TgZ(28,"app-delete-modal",13,14),e.NdJ("deleteItem",function(g){return l.onActionClicked(g.actionToPerform,g.data)}),e.qZA()),2&n){const r=e.MAs(23);let g,I;e.xp6(2),e.s9C("placeholder",e.lcZ(3,11,"search_your_files")),e.Q6J("formControl",l.term),e.xp6(4),e.Oqu(e.lcZ(7,13,"sort_by_desc")),e.xp6(3),e.Oqu(e.lcZ(10,15,"sort_by_newest")),e.xp6(3),e.Oqu(e.lcZ(13,17,"sort_by_oldest")),e.xp6(3),e.Oqu(e.lcZ(16,19,"sort_by_smallest")),e.xp6(3),e.Oqu(e.lcZ(19,21,"sort_by_largest")),e.xp6(3),e.Q6J("ngIf",l.loading)("ngIfElse",r),e.xp6(3),e.Q6J("ngIf",null==(g=e.lcZ(25,23,l.attachment$))||null==g.data?null:g.data.length),e.xp6(2),e.Q6J("ngIf",!(null!=(I=e.lcZ(27,25,l.attachment$))&&null!=I.data&&I.data.length||l.loading))}},dependencies:[m.sg,m.O5,h.YN,h.Kr,h.Fj,h.JJ,h.oH,f.jt,f.iD,f.Vi,f.TH,T.R,O.Q,Z.d,D.z,P.A,m.Ov,b.X$]})}(0,c.gn)([(0,C.Ph)(v.s.attachment)],d.prototype,"attachment$",void 0)},5849:(w,E,a)=>{a.d(E,{P:()=>y});var c=a(5861),e=a(9212),m=a(3026),C=a(1045),h=a(186),u=a(3477),A=a(6814),v=a(7680),x=a(6583),f=a(2879),T=a(4274),O=a(9515);const Z=["mediaModal"];function D(s,M){if(1&s){const t=e.EpF();e.TgZ(0,"app-media-box",17),e.NdJ("setImage",function(p){e.CHM(t);const d=e.oxw(3);return e.KtG(d.setImage(p))}),e.qZA()}if(2&s){const t=e.oxw(3);e.Q6J("multiple",t.multipleImage)("url",t.url)("deleteAction",!1)}}function P(s,M){1&s&&(e.TgZ(0,"li",14)(1,"a",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,D,1,3,"ng-template",16),e.qZA()),2&s&&(e.Q6J("ngbNavItem","select"),e.xp6(2),e.Oqu(e.lcZ(3,2,"select_file")))}function b(s,M){if(1&s){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",20),e.NdJ("removed",function(){const d=e.CHM(t).$implicit,i=e.oxw(4);return e.KtG(i.onRemove(d))}),e.TgZ(1,"ngx-dropzone-label"),e._uU(2),e.qZA()()}if(2&s){const t=M.$implicit;e.Q6J("file",t)("removable",!0),e.xp6(2),e.AsE("",t.name," (",t.type,")")}}function U(s,M){if(1&s){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("change",function(p){e.CHM(t);const d=e.oxw(3);return e.KtG(d.onSelect(p))}),e.TgZ(1,"ngx-dropzone-label")(2,"div")(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.YNc(6,b,3,4,"ngx-dropzone-image-preview",19),e.qZA()}if(2&s){const t=e.oxw(3);e.Q6J("accept","image/*"),e.xp6(4),e.Oqu(e.lcZ(5,3,"drop_files_here")),e.xp6(2),e.Q6J("ngForOf",t.files)}}function L(s,M){1&s&&(e.TgZ(0,"li",14)(1,"a",15),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,U,7,5,"ng-template",16),e.qZA()),2&s&&(e.Q6J("ngbNavItem","upload"),e.xp6(2),e.Oqu(e.lcZ(3,2,"upload_new")))}function B(s,M){if(1&s){const t=e.EpF();e.TgZ(0,"div",1)(1,"h2"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-button",2),e.NdJ("click",function(){const d=e.CHM(t).$implicit;return e.KtG(d.dismiss("Cross click"))}),e._UZ(5,"i",3),e.qZA()(),e.TgZ(6,"div",4)(7,"ul",5,6),e.NdJ("activeIdChange",function(p){e.CHM(t);const d=e.oxw();return e.KtG(d.active=p)}),e.YNc(9,P,5,4,"li",7)(10,L,5,4,"li",8),e.qZA(),e._UZ(11,"div",9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"div",11),e.TgZ(14,"div",12)(15,"app-button",13),e.NdJ("click",function(){const d=e.CHM(t).$implicit,i=e.MAs(8),o=e.oxw();return e.KtG("upload"==o.active?o.addMedia(i):o.selectedMedia(d))}),e._uU(16),e.ALo(17,"translate"),e.qZA()()()}if(2&s){const t=e.MAs(8),_=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,13,"insert_media")),e.xp6(2),e.Tol("btn btn-close"),e.Q6J("spinner",!1)("id","media_close_btn"),e.xp6(3),e.Q6J("activeId",_.active),e.xp6(2),e.Q6J("ngIf",_.selectMedia),e.xp6(1),e.Q6J("hasPermission","attachment.create"),e.xp6(1),e.Q6J("ngbNavOutlet",t),e.xp6(4),e.Tol("align-items-center btn btn-theme d-flex"),e.Q6J("id","media_btn"),e.xp6(1),e.hij(" ",e.lcZ(17,15,"insert_media")," ")}}let y=(()=>{class s{constructor(t,_,p){this.store=t,this.notificationService=_,this.modalService=p,this.active="select",this.modalOpen=!1,this.files=[],this.selectMedia=!0,this.multipleImage=!1,this.url=!1,this.selectImage=new e.vpe}openModal(){var t=this;return(0,c.Z)(function*(){t.modalOpen=!0,t.active=t.selectMedia?"select":"upload",t.modalService.open(t.MediaModal,{ariaLabelledBy:"Media-Modal",centered:!0,windowClass:"theme-modal modal-xl media-modal"}).result.then(_=>{t.closeResult=`Closed with: ${_}`},_=>{t.closeResult=`Dismissed ${t.getDismissReason(_)}`})})()}getDismissReason(t){return this.active=this.selectMedia?"select":"upload",t===m.If.ESC?"by pressing ESC":t===m.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}onSelect(t){this.files.length+t.addedFiles.length<=5?this.files.push(...t.addedFiles):this.notificationService.showError("You've reached 5 file maximum.")}onRemove(t){this.files.splice(this.files.indexOf(t),1)}addMedia(t){this.files.length&&"upload"==this.active&&this.store.dispatch(new C.Jf(this.files)).subscribe({complete:()=>{this.files=[],this.selectMedia?t.select("select"):this.modalService.dismissAll()}})}setImage(t){this.media=t}selectedMedia(t){this.selectImage.emit(this.media),t.dismiss("close")}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}static#e=this.\u0275fac=function(_){return new(_||s)(e.Y36(h.yh),e.Y36(u.g),e.Y36(m.FF))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-media-modal"]],viewQuery:function(_,p){if(1&_&&e.Gf(Z,5),2&_){let d;e.iGM(d=e.CRH())&&(p.MediaModal=d.first)}},inputs:{selectMedia:"selectMedia",multipleImage:"multipleImage",url:"url"},outputs:{selectImage:"selectImage"},decls:2,vars:0,consts:[["mediaModal",""],[1,"modal-header"],[3,"spinner","id","click"],[1,"ri-close-line"],[1,"modal-body"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngIf"],[3,"ngbNavItem",4,"hasPermission"],[1,"mt-2",3,"ngbNavOutlet"],[1,"modal-footer"],[1,"left-part"],[1,"right-part"],[3,"id","click"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"multiple","url","deleteAction","setImage"],["ngx-dropzone","",1,"content-section","drop-files-sec",3,"accept","change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"]],template:function(_,p){1&_&&e.YNc(0,B,18,17,"ng-template",null,0,e.W1O)},dependencies:[A.sg,A.O5,m.uN,m.Pz,m.nv,m.Is,m.Vx,m.tO,m.Dy,v._f,v.NP,v.sv,x.Z,f.r,T.A,O.X$]})}return s})()},6735:(w,E,a)=>{a.d(E,{d:()=>h});var c=a(9212),e=a(6814),m=a(9515);function C(u,A){if(1&u&&c._UZ(0,"img",1),2&u){const v=c.oxw();c.Q6J("src",v.image,c.LSH)}}let h=(()=>{class u{constructor(){this.class="no-data-added"}static#e=this.\u0275fac=function(x){return new(x||u)};static#t=this.\u0275cmp=c.Xpm({type:u,selectors:[["app-no-data"]],inputs:{class:"class",image:"image",text:"text"},decls:5,vars:6,consts:[["class","img-fluid","alt","no-data",3,"src",4,"ngIf"],["alt","no-data",1,"img-fluid",3,"src"]],template:function(x,f){1&x&&(c.TgZ(0,"div"),c.YNc(1,C,1,1,"img",0),c.TgZ(2,"h4"),c._uU(3),c.ALo(4,"translate"),c.qZA()()),2&x&&(c.Tol(f.class),c.xp6(1),c.Q6J("ngIf",f.image),c.xp6(2),c.Oqu(c.lcZ(4,4,f.text)))},dependencies:[e.O5,m.X$]})}return u})()}}]);