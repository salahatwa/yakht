"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[317,255],{4317:(y,b,i)=>{i.r(b),i.d(b,{AttributeModule:()=>j});var a=i(6814),m=i(6505),_=i(7582),f=i(186),d=i(6551),h=i(8906),t=i(9212),g=i(1427),v=i(7243),u=i(4274),c=i(9515);const x=()=>["/attribute/create"];function Z(o,l){1&o&&(t.TgZ(0,"div",3)(1,"a",4),t._UZ(2,"i",5),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("routerLink",t.DdM(4,x)),t.xp6(2),t.hij(" ",t.lcZ(4,2,"add_attribute")," "))}class C{constructor(l,e){this.store=l,this.router=e,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"name",dataField:"name",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"attribute.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"attribute.destroy"}],data:[],total:0}}ngOnInit(){this.attribute$.subscribe(l=>{this.tableConfig.data=l?l?.data:[],this.tableConfig.total=l?l?.total:0})}onTableChange(l){this.store.dispatch(new h._L(l))}onActionClicked(l){"edit"==l.actionToPerform?this.edit(l.data):"delete"==l.actionToPerform?this.delete(l.data):"deleteAll"==l.actionToPerform&&this.deleteAll(l.data)}edit(l){this.router.navigateByUrl(`/attribute/edit/${l.id}`)}delete(l){this.store.dispatch(new h.Vi(l.id))}deleteAll(l){this.store.dispatch(new h.ec(l))}static#t=this.\u0275fac=function(e){return new(e||C)(t.Y36(f.yh),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["app-attribute"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableConfig","hasCheckbox","tableChanged","rowClicked","action"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(e,r){1&e&&(t.TgZ(0,"app-page-wrapper",0),t.YNc(1,Z,5,5,"div",1),t.TgZ(2,"app-table",2),t.NdJ("tableChanged",function(p){return r.onTableChange(p)})("rowClicked",function(p){return r.edit(p)})("action",function(p){return r.onActionClicked(p)}),t.qZA()()),2&e&&(t.Q6J("gridClass","col-sm-12")("title","attribute"),t.xp6(1),t.Q6J("hasPermission","attribute.create"),t.xp6(1),t.Q6J("tableConfig",r.tableConfig)("hasCheckbox",!0))},dependencies:[m.rH,g.a,v.t,u.A,c.X$]})}(0,_.gn)([(0,f.Ph)(d.x.attribute)],C.prototype,"attribute$",void 0);var s=i(6223),F=i(8645),I=i(2096),J=i(4664),U=i(1631),L=i(9773),E=i(9997),N=i(3092),M=i(2879);function O(o,l){1&o&&(t.TgZ(0,"div",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"attribute_name_is_required")," "))}function Q(o,l){1&o&&(t.TgZ(0,"div",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"value_is_required")," "))}function B(o,l){if(1&o&&(t.TgZ(0,"div",19)(1,"div",20),t._UZ(2,"input",21),t.TgZ(3,"h6"),t._uU(4),t.qZA()()()),2&o){const e=t.oxw().$implicit;let r;t.xp6(4),t.Oqu(null==(r=e.get("hex_color"))?null:r.value)}}function P(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",22)(1,"a",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,p=t.oxw();return t.KtG(p.remove(n))}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"remove")))}function D(o,l){if(1&o&&(t.TgZ(0,"app-form-fields",14),t.ALo(1,"translate"),t.TgZ(2,"div",15)(3,"div"),t._UZ(4,"input",16),t.ALo(5,"translate"),t.YNc(6,Q,3,3,"div",3),t.qZA(),t.YNc(7,B,5,1,"div",17)(8,P,4,3,"div",18),t.qZA()()),2&o){const e=l.$implicit,r=l.index,n=t.oxw();t.s9C("formGroupName",r),t.Q6J("label",t.lcZ(1,10,"value"))("for","value")("required",!0),t.xp6(3),t.Tol("color"===n.form.get("style").value?"col-sm-7 col-9":"col-sm-10 col-9"),t.xp6(1),t.s9C("placeholder",t.lcZ(5,12,"attribute_value")),t.xp6(2),t.Q6J("ngIf",e.get("value").touched&&(null==e.get("value").errors?null:e.get("value").errors.required)),t.xp6(1),t.Q6J("ngIf","color"===n.form.get("style").value),t.xp6(1),t.Q6J("ngIf",(null==n.valueControl||null==n.valueControl.controls?null:n.valueControl.controls.length)>1)}}const w=()=>[];let T=(()=>{class o{constructor(e,r,n,p){this.store=e,this.route=r,this.router=n,this.formBuilder=p,this.documents=[{value:"",hex_color:"",id:""}],this.destroy$=new F.x,this.variantStyle=[{value:"rectangle",label:"Rectangle"},{value:"circle",label:"Circle"},{value:"radio",label:"Radio"},{value:"dropdown",label:"Dropdown"},{value:"image",label:"Image"},{value:"color",label:"Color"}],this.form=this.formBuilder.group({name:new s.NI("",[s.kI.required]),style:new s.NI("rectangle",[s.kI.required]),status:new s.NI(1),value:this.formBuilder.array([],[s.kI.required])})}get valueControl(){return this.form.get("value")}ngOnInit(){this.route.params.pipe((0,J.w)(e=>e.id?this.store.dispatch(new h.bW(e.id)).pipe((0,U.z)(()=>this.store.select(d.x.selectedAttribute))):(0,I.of)()),(0,L.R)(this.destroy$)).subscribe(e=>{this.id=e?.id,this.form.patchValue({name:e?.name,style:e?.style,status:e?.status}),e?.attribute_values.forEach(r=>this.valueControl.push(this.formBuilder.group({value:new s.NI(r.value,[s.kI.required]),hex_color:new s.NI(r.hex_color),id:new s.NI(r.id,[])})))}),"create"==this.type&&this.documents.forEach(e=>this.valueControl.push(this.formBuilder.group({value:[e.value,[s.kI.required]],hex_color:[e.hex_color],id:[e.id]})))}add(e){e.preventDefault();const r="color"===this.form.get("style").value?this.formBuilder.group({value:["",[s.kI.required]],hex_color:[""]}):this.formBuilder.group({value:["",[s.kI.required]]});this.valueControl.push(r)}remove(e){this.valueControl.length<=1||this.valueControl.removeAt(+e)}submit(){this.form.markAllAsTouched();let e=new h.jz(this.form.value);"edit"==this.type&&this.id&&(e=new h.pm(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/attribute")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(f.yh),t.Y36(m.gz),t.Y36(m.F0),t.Y36(s.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-form-attribute"]],inputs:{type:"type"},decls:22,vars:32,consts:[[1,"theme-form","theme-form-2","mega-form",3,"formGroup","ngSubmit"],[3,"label","for","required"],["type","text","name","name","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","style",1,"custom-select","d-block",3,"data","placeholder","noResultMessage"],[1,"help-text"],["formArrayName","value"],[3,"label","for","required","formGroupName",4,"ngFor","ngForOf"],[1,"row"],[1,"col-2","offset-sm-2"],[3,"id","spinner","click"],[1,"border-up-class","mt-4"],[3,"id"],[1,"invalid-feedback"],[3,"label","for","required","formGroupName"],[1,"row","g-sm-4","g-3","align-items-center"],["type","text","formControlName","value",1,"form-control",3,"placeholder"],["class","col-sm-3 col-9",4,"ngIf"],["class","col-sm-2 col-3",4,"ngIf"],[1,"col-sm-3","col-9"],[1,"color-box"],["type","color","formControlName","hex_color",1,"form-control"],[1,"col-sm-2","col-3"],[1,"invalid-feedback","h-100","w-100","cursor-pointer",3,"click"]],template:function(r,n){1&r&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(1,"app-form-fields",1),t.ALo(2,"translate"),t._UZ(3,"input",2),t.ALo(4,"translate"),t.YNc(5,O,3,3,"div",3),t.qZA(),t.TgZ(6,"app-form-fields",1),t._UZ(7,"select2",4),t.ALo(8,"translate"),t.ALo(9,"translate"),t.TgZ(10,"p",5),t._uU(11),t.qZA()(),t.ynx(12,6),t.YNc(13,D,9,14,"app-form-fields",7),t.BQk(),t.TgZ(14,"div",8)(15,"div",9)(16,"app-button",10),t.NdJ("click",function(k){return n.add(k)}),t._uU(17),t.ALo(18,"translate"),t.qZA()()(),t.TgZ(19,"div",11)(20,"app-button",12),t._uU(21),t.qZA()()()),2&r&&(t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("label",t.lcZ(2,21,"attribute_name"))("for","name")("required",!0),t.xp6(2),t.s9C("placeholder",t.lcZ(4,23,"attribute_name")),t.xp6(2),t.Q6J("ngIf",n.form.controls.name.touched&&(null==n.form.controls.name.errors?null:n.form.controls.name.errors.required)),t.xp6(1),t.Q6J("label","style")("for","style")("required",!0),t.xp6(1),t.s9C("noResultMessage",t.lcZ(9,27,"no_data_found")),t.Q6J("data",null!=n.variantStyle&&n.variantStyle.length?n.variantStyle:t.DdM(31,w))("placeholder",t.lcZ(8,25,"select_style")),t.xp6(4),t.Oqu("*Choose the desired shape style, such as rectangle or circle. Based on your selection, variant options will be displayed on product page."),t.xp6(2),t.Q6J("ngForOf",n.valueControl.controls),t.xp6(3),t.Tol("btn btn-theme"),t.Q6J("id","add_value_btn")("spinner",!1),t.xp6(1),t.hij(" ",t.lcZ(18,29,"add_value")," "),t.xp6(3),t.Q6J("id","attribute_btn"),t.xp6(1),t.hij(" ","create"==n.type?"Save Attribute":"Update Attribute"," "))},dependencies:[a.sg,a.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,E.ub,N.L,M.r,c.X$]})}return o})(),S=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-attribute"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(r,n){1&r&&(t.TgZ(0,"app-page-wrapper",0),t._UZ(1,"app-form-attribute",1),t.qZA()),2&r&&(t.Q6J("title","add_attribute"),t.xp6(1),t.Q6J("type","create"))},dependencies:[v.t,T]})}return o})(),q=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-attribute"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(r,n){1&r&&(t.TgZ(0,"app-page-wrapper",0),t._UZ(1,"app-form-attribute",1),t.qZA()),2&r&&(t.Q6J("title","edit_attribute"),t.xp6(1),t.Q6J("type","edit"))},dependencies:[v.t,T]})}return o})();var A=i(5419);const R=[{path:"",component:C,canActivate:[A.n],data:{permission:"attribute.index"}},{path:"create",component:S,canActivate:[A.n],data:{permission:["attribute.index","attribute.create"]}},{path:"edit/:id",component:q,canActivate:[A.n],data:{permission:["attribute.index","attribute.edit"]}}];let Y=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(R),m.Bz]})}return o})();var $=i(6208);let j=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[a.ez,Y,$.m,f.$l.forFeature([d.x])]})}return o})()},5419:(y,b,i)=>{i.d(b,{n:()=>f});var a=i(9212),m=i(186),_=i(6505);let f=(()=>{class d{constructor(t,g){this.store=t,this.router=g}canActivate(t,g){const v=this.store.selectSnapshot(c=>c.account).permissions?.map(c=>c?.name),u=t.data?.permission;return!!(!u||!Array.isArray(u)&&v?.includes(u)||Array.isArray(u)&&u?.length&&u.every(c=>v?.includes(c)))||(this.router.navigate(["/error/403"]),!1)}static#t=this.\u0275fac=function(g){return new(g||d)(a.LFG(m.yh),a.LFG(_.F0))};static#e=this.\u0275prov=a.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},3092:(y,b,i)=>{i.d(b,{L:()=>h});var a=i(9212),m=i(6814),_=i(9515);function f(t,g){1&t&&(a.TgZ(0,"span",1),a._uU(1,"*"),a.qZA())}const d=["*"];let h=(()=>{class t{constructor(){this.class="mb-4 row align-items-center g-2",this.labelClass="form-label-title col-sm-2 mb-0",this.gridClass="col-sm-10"}static#t=this.\u0275fac=function(u){return new(u||t)};static#e=this.\u0275cmp=a.Xpm({type:t,selectors:[["app-form-fields"]],inputs:{class:"class",label:"label",labelClass:"labelClass",gridClass:"gridClass",for:"for",required:"required"},ngContentSelectors:d,decls:7,vars:11,consts:[["class","theme-color ms-2 required-dot",4,"ngIf"],[1,"theme-color","ms-2","required-dot"]],template:function(u,c){1&u&&(a.F$t(),a.TgZ(0,"div")(1,"label"),a._uU(2),a.ALo(3,"translate"),a.YNc(4,f,2,0,"span",0),a.qZA(),a.TgZ(5,"div"),a.Hsn(6),a.qZA()()),2&u&&(a.Tol(c.class),a.xp6(1),a.Tol(c.labelClass),a.uIk("for",c.for),a.xp6(1),a.hij(" ",a.lcZ(3,9,c.label),""),a.xp6(2),a.Q6J("ngIf",c.required),a.xp6(1),a.Tol(c.gridClass))},dependencies:[m.O5,_.X$]})}return t})()}}]);