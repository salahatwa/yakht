"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[71],{9966:(C,f,n)=>{n.d(f,{m:()=>Z});var p=n(7582),g=n(186),d=n(8835),y=n(4197),e=n(9212),s=n(6814),l=n(6505),T=n(7243),_=n(4274),i=n(6223),A=n(6735),J=n(5744);const m=["deleteModal"],K=(r,c)=>[r,c];function N(r,c){if(1&r&&(e.TgZ(0,"a",8),e._UZ(1,"i",9),e.qZA()),2&r){const t=e.oxw();e.Q6J("routerLink",e.WLB(1,K,"post"==t.node.type?"/blog/category/edit":"/category/edit",null==t.node?null:t.node.id))}}function v(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"a",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.DeleteModal.openModal("delete",o.node))}),e._UZ(1,"i",11),e.qZA()}}function x(r,c){if(1&r&&e._UZ(0,"app-tree-node",13),2&r){const t=c.$implicit,a=e.oxw(2);e.Q6J("node",t)("displayKey",a.displayKey)("recursionKey",a.recursionKey)}}function Q(r,c){if(1&r&&(e.TgZ(0,"ul"),e.YNc(1,x,1,3,"app-tree-node",12),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.node[t.recursionKey])}}let F=(()=>{class r{constructor(t,a,o){this.store=t,this.router=a,this.route=o,this.categoryType="product",this.showChildrenNode=!0}ngOnInit(){this.route.params.subscribe(t=>this.id=t.id)}delete(t,a){this.store.dispatch(new y.B5(a.id,a.type)).subscribe({complete:()=>{this.router.navigateByUrl("post"==a.type?"/blog/category":"/category")}})}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(g.yh),e.Y36(l.F0),e.Y36(l.gz))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-tree-node"]],viewQuery:function(a,o){if(1&a&&e.Gf(m,5),2&a){let u;e.iGM(u=e.CRH())&&(o.DeleteModal=u.first)}},inputs:{node:"node",recursionKey:"recursionKey",displayKey:"displayKey",categoryType:"categoryType"},decls:11,vars:10,consts:[[1,"cursor-pointer"],["role","presentation",1,"tree-icon","file-icon",3,"click"],[1,"tree-options"],["href","javascript:void(0)",3,"routerLink",4,"hasPermission"],["href","javascript:void(0)",3,"click",4,"hasPermission"],[4,"ngIf"],[3,"deleteItem"],["deleteModal",""],["href","javascript:void(0)",3,"routerLink"],[1,"ri-pencil-line","text-success"],["href","javascript:void(0)",3,"click"],[1,"ri-delete-bin-7-line","text-danger"],[3,"node","displayKey","recursionKey",4,"ngFor","ngForOf"],[3,"node","displayKey","recursionKey"]],template:function(a,o){1&a&&(e.TgZ(0,"li",0)(1,"div")(2,"i",1),e.NdJ("click",function(){return o.showChildrenNode=!o.showChildrenNode}),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"div",2),e.YNc(6,N,2,4,"a",3)(7,v,2,0,"a",4),e.qZA()(),e.YNc(8,Q,2,1,"ul",5),e.qZA(),e.TgZ(9,"app-delete-modal",6,7),e.NdJ("deleteItem",function(h){return o.delete(h.actionToPerform,h.data)}),e.qZA()),2&a&&(e.ekj("inside-ul",o.node[o.recursionKey]&&o.node[o.recursionKey].length),e.xp6(3),e.Tol(o.node.id==o.id?"active":""),e.ekj("disabled","1"!=o.node.status),e.xp6(1),e.Oqu(o.node[o.displayKey]||(null==o.node?null:o.node.name)),e.xp6(2),e.Q6J("hasPermission","category.edit"),e.xp6(1),e.Q6J("hasPermission","category.destroy"),e.xp6(1),e.Q6J("ngIf",o.node[o.recursionKey]&&o.node[o.recursionKey].length&&o.showChildrenNode))},dependencies:[s.sg,s.O5,l.rH,J.z,_.A,r]})}return r})();var I=n(9515);function w(r,c){if(1&r&&e._UZ(0,"app-tree-node",8),2&r){const t=c.$implicit,a=e.oxw(2);e.Q6J("node",t)("displayKey",a.displayKey)("recursionKey",a.recursionKey)("categoryType",a.categoryType)}}function O(r,c){if(1&r&&(e.TgZ(0,"ul",4)(1,"li",5)(2,"div"),e._UZ(3,"i",6),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"ul"),e.YNc(8,w,1,4,"app-tree-node",7),e.qZA()()()),2&r){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,2,"categories")),e.xp6(3),e.Q6J("ngForOf",t.dataToShow)}}function L(r,c){1&r&&e._UZ(0,"app-no-data",9),2&r&&(e.Tol("no-data-added category-no-data"),e.Q6J("image","assets/svg/no-category.svg")("text","no_categories_found"))}let U=(()=>{class r{constructor(){this.displayKey="name",this.categoryType="product",this.treeSearch=new i.NI(""),this.dataToShow=[],this.treeSearch.valueChanges.subscribe(t=>{t?(this.dataToShow=[],this.data.forEach(a=>{this.hasValue(a)&&this.dataToShow.push(a)})):this.dataToShow=this.data})}ngOnChanges(){this.dataToShow=this.data}hasValue(t){let a=!1;return t[this.displayKey].toLowerCase().includes(this.treeSearch?.value?.toLowerCase())&&(a=!0),t[this.recursionKey]?.length&&t[this.recursionKey].forEach(o=>{this.hasValue(o)&&(a=!0)}),a}static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-tree"]],inputs:{type:"type",data:"data",recursionKey:"recursionKey",displayKey:"displayKey",categoryType:"categoryType"},features:[e.TTD],decls:5,vars:6,consts:[[1,"theme-tree-box"],[1,"form-control",3,"placeholder","formControl"],["class","tree-main-ul",4,"ngIf"],[3,"class","image","text",4,"ngIf"],[1,"tree-main-ul"],[1,"cursor-pointer"],["role","presentation",1,"tree-icon","folder-icon"],[3,"node","displayKey","recursionKey","categoryType",4,"ngFor","ngForOf"],[3,"node","displayKey","recursionKey","categoryType"],[3,"image","text"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.ALo(2,"translate"),e.YNc(3,O,9,4,"ul",2),e.qZA(),e.YNc(4,L,1,4,"app-no-data",3)),2&a&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,4,"search_category")),e.Q6J("formControl",o.treeSearch),e.xp6(2),e.Q6J("ngIf",null==o.dataToShow?null:o.dataToShow.length),e.xp6(1),e.Q6J("ngIf",!(null!=o.dataToShow&&o.dataToShow.length)))},dependencies:[s.sg,s.O5,i.Fj,i.JJ,i.oH,A.d,F,I.X$]})}return r})();var S=n(8645),b=n(2096),Y=n(4664),B=n(1631),M=n(9773),E=n(3092),P=n(8176),D=n(6515),V=n(2879),j=n(766);function $(r,c){1&r&&(e.TgZ(0,"div",14),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"name_is_required")," "))}function q(r,c){1&r&&(e.TgZ(0,"app-form-fields",2),e.ALo(1,"translate"),e.TgZ(2,"div",15),e._UZ(3,"input",16),e.TgZ(4,"span",17),e._uU(5,"%"),e.qZA()(),e.TgZ(6,"p",18),e._uU(7),e.qZA()()),2&r&&(e.Q6J("label",e.lcZ(1,4,"commission_rate"))("for","commission_rate")("required",!1),e.xp6(7),e.Oqu("*Define the percentage of earnings retained as commission."))}const R=r=>[r],H=()=>[];let X=(()=>{class r{constructor(t,a,o,u){this.store=t,this.route=a,this.router=o,this.formBuilder=u,this.categoryType="product",this.destroy$=new S.x,this.form=this.formBuilder.group({name:new i.NI("",[i.kI.required]),description:new i.NI,parent_id:new i.NI,type:new i.NI(this.categoryType,[]),commission_rate:new i.NI,category_image_id:new i.NI,category_icon_id:new i.NI,status:new i.NI(!0)})}ngOnChanges(){this.form.controls.type.setValue(this.categoryType)}ngOnInit(){this.route.params.pipe((0,Y.w)(t=>t.id?this.store.dispatch(new y.C6(t.id)).pipe((0,B.z)(()=>this.store.select(d.O.selectedCategory))):(0,b.of)()),(0,M.R)(this.destroy$)).subscribe(t=>{this.category=t,this.form.patchValue({name:this.category?.name,description:this.category?.description,parent_id:this.category?.parent_id,type:this.category?.type,commission_rate:this.category?.commission_rate,category_image_id:this.category?.category_image_id,category_icon_id:this.category?.category_icon_id,status:this.category?.status})})}selectItem(t){Array.isArray(t)&&t.length?this.form.controls.parent_id.setValue(t[0]):this.form.controls.parent_id.setValue("")}selectCategoryImage(t){Array.isArray(t)||this.form.controls.category_image_id.setValue(t?t.id:"")}selectCategoryIcon(t){Array.isArray(t)||this.form.controls.category_icon_id.setValue(t?t.id:"")}submit(){this.form.markAllAsTouched();let t=new y.Ft(this.form.value);"edit"==this.type&&this.category?.id&&(t=new y.Yn(this.form.value,this.category.id)),this.form.valid&&this.store.dispatch(t).subscribe({complete:()=>{"create"==this.type?(this.form.reset(),this.form.controls.category_image_id.setValue(""),this.form.controls.category_icon_id.setValue(""),this.form.controls.status.setValue(!0)):this.router.navigateByUrl("product"===this.form.value.type?"/category":"/blog/category")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(g.yh),e.Y36(l.gz),e.Y36(l.F0),e.Y36(i.qu))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-form-category"]],inputs:{type:"type",categories:"categories",categoryType:"categoryType"},features:[e.TTD],decls:30,vars:56,consts:[[3,"gridClass","title"],[1,"theme-form","theme-form-2","mega-form",3,"formGroup","ngSubmit"],[3,"label","for","required"],["type","text","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[3,"label","for","required",4,"ngIf"],[3,"selectSingle","selectedOption","options","subArrayKey","selectedItem"],[3,"multipleImage","image","selectedFiles"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"],[1,"input-group"],["id","commission_rate","type","number","min","0","max","100","oninput","if (value > 100) value = 100; if (value < 0) value = 0;","placeholder","Enter Commision Rate","formControlName","commission_rate","numbersOnly","",1,"form-control"],[1,"input-group-text"],[1,"help-text"]],template:function(a,o){1&a&&(e.TgZ(0,"app-page-wrapper",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.submit()}),e.TgZ(2,"app-form-fields",2),e.ALo(3,"translate"),e._UZ(4,"input",3),e.ALo(5,"translate"),e.YNc(6,$,3,3,"div",4),e.qZA(),e.TgZ(7,"app-form-fields",2),e.ALo(8,"translate"),e._UZ(9,"textarea",5),e.ALo(10,"translate"),e.qZA(),e.YNc(11,q,8,6,"app-form-fields",6),e.TgZ(12,"app-form-fields",2),e.ALo(13,"translate"),e.TgZ(14,"app-advanced-dropdown",7),e.NdJ("selectedItem",function(h){return o.selectItem(h)}),e.qZA()(),e.TgZ(15,"app-form-fields",2),e.ALo(16,"translate"),e.TgZ(17,"app-image-upload",8),e.NdJ("selectedFiles",function(h){return o.selectCategoryImage(h)}),e.qZA()(),e.TgZ(18,"app-form-fields",2),e.ALo(19,"translate"),e.TgZ(20,"app-image-upload",8),e.NdJ("selectedFiles",function(h){return o.selectCategoryIcon(h)}),e.qZA()(),e.TgZ(21,"app-form-fields",2),e.ALo(22,"translate"),e.TgZ(23,"div",9)(24,"label",10),e._UZ(25,"input",11)(26,"span",12),e.qZA()()(),e.TgZ(27,"app-button",13),e._uU(28),e.ALo(29,"translate"),e.qZA()()()),2&a&&(e.Q6J("gridClass","col-sm-12")("title",o.type+"_category"),e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(1),e.Q6J("label",e.lcZ(3,35,"name"))("for","name")("required",!0),e.xp6(2),e.s9C("placeholder",e.lcZ(5,37,"enter_name")),e.xp6(2),e.Q6J("ngIf",o.form.controls.name.touched&&(null==o.form.controls.name.errors?null:o.form.controls.name.errors.required)),e.xp6(1),e.Q6J("label",e.lcZ(8,39,"description"))("for","description")("required",!1),e.xp6(2),e.s9C("placeholder",e.lcZ(10,41,"enter_description")),e.xp6(2),e.Q6J("ngIf","product"==o.categoryType),e.xp6(1),e.Q6J("label",e.lcZ(13,43,"select_parent"))("for","category")("required",!1),e.xp6(2),e.Q6J("selectSingle",!0)("selectedOption",o.category&&o.category.parent_id?e.VKq(53,R,o.category.parent_id):e.DdM(55,H))("options",o.categories)("subArrayKey","subcategories"),e.xp6(1),e.Q6J("label",e.lcZ(16,45,"image"))("for","image")("required",!1),e.xp6(2),e.Q6J("multipleImage",!1)("image",null==o.category?null:o.category.category_image),e.xp6(1),e.Q6J("label",e.lcZ(19,47,"icon"))("for","icon")("required",!1),e.xp6(2),e.Q6J("multipleImage",!1)("image",null==o.category?null:o.category.category_icon),e.xp6(1),e.Q6J("label",e.lcZ(22,49,"status"))("for","status")("required",!1),e.xp6(6),e.Q6J("id","category_btn"),e.xp6(1),e.hij(" ",e.lcZ(29,51,"create"==o.type?"save_category":"update_category")," "))},dependencies:[s.O5,i._Y,i.Fj,i.wV,i.Wl,i.JJ,i.JL,i.qQ,i.Fd,i.sg,i.u,E.L,P.J,T.t,D.l,V.r,j.N,I.X$]})}return r})();const z=r=>[r];function G(r,c){if(1&r&&(e.TgZ(0,"a",9),e._UZ(1,"i",10),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r){const t=e.oxw(2);e.Q6J("routerLink",e.VKq(4,z,"post"==t.categoryType?"/blog/category":"/category")),e.xp6(2),e.hij(" ",e.lcZ(3,2,"create")," ")}}function W(r,c){if(1&r&&(e.TgZ(0,"div",7),e.YNc(1,G,4,6,"a",8),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","edit"==t.type)}}function k(r,c){if(1&r&&(e._UZ(0,"app-form-category",11),e.ALo(1,"async")),2&r){const t=e.oxw();let a;e.Q6J("categories",null==(a=e.lcZ(1,3,t.category$))?null:a.data)("type",t.type)("categoryType",t.categoryType)}}class Z{constructor(c){this.store=c,this.type="create",this.categoryType="product"}ngOnInit(){this.store.dispatch(new y.m1({type:this.categoryType}))}static#e=this.\u0275fac=function(t){return new(t||Z)(e.Y36(g.yh))};static#t=this.\u0275cmp=e.Xpm({type:Z,selectors:[["app-category"]],inputs:{type:"type",categoryType:"categoryType"},decls:8,vars:10,consts:[[1,"row","m-0"],[1,"col-xl-4","p-0"],[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"data","recursionKey","type","categoryType"],[1,"col-xl-8","p-0"],[3,"categories","type","categoryType",4,"hasPermission"],["button",""],["class","align-items-center btn btn-theme d-flex",3,"routerLink",4,"ngIf"],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"],[3,"categories","type","categoryType"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-page-wrapper",2),e.YNc(3,W,2,1,"div",3),e._UZ(4,"app-tree",4),e.ALo(5,"async"),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,k,2,5,"app-form-category",6),e.qZA()()),2&t){let o;e.xp6(2),e.Q6J("gridClass","col-sm-12")("title","categories"),e.xp6(1),e.Q6J("hasPermission","category.create"),e.xp6(1),e.Q6J("data",null==(o=e.lcZ(5,8,a.category$))?null:o.data)("recursionKey","subcategories")("type",a.type)("categoryType",a.categoryType),e.xp6(3),e.Q6J("hasPermission","category."+a.type)}},dependencies:[s.O5,l.rH,T.t,_.A,U,X,s.Ov,I.X$]})}(0,p.gn)([(0,g.Ph)(d.O.category)],Z.prototype,"category$",void 0)},8071:(C,f,n)=>{n.r(f),n.d(f,{CategoryModule:()=>J});var p=n(6814),g=n(186),d=n(6505),y=n(9966),e=n(8817),s=n(5419),l=n(9212);const T=[{path:"",component:y.m,canActivate:[s.n],data:{permission:"category.index"}},{path:"edit/:id",component:e.q,canActivate:[s.n],data:{permission:["category.index","category.edit"]}}];let _=(()=>{class m{static#e=this.\u0275fac=function(v){return new(v||m)};static#t=this.\u0275mod=l.oAB({type:m});static#o=this.\u0275inj=l.cJS({imports:[d.Bz.forChild(T),d.Bz]})}return m})();var i=n(6208),A=n(8835);let J=(()=>{class m{static#e=this.\u0275fac=function(v){return new(v||m)};static#t=this.\u0275mod=l.oAB({type:m});static#o=this.\u0275inj=l.cJS({imports:[p.ez,_,i.m,g.$l.forFeature([A.O])]})}return m})()},8817:(C,f,n)=>{n.d(f,{q:()=>d});var p=n(9212),g=n(9966);let d=(()=>{class y{constructor(){this.categoryType="product"}static#e=this.\u0275fac=function(l){return new(l||y)};static#t=this.\u0275cmp=p.Xpm({type:y,selectors:[["app-edit-category"]],inputs:{categoryType:"categoryType"},decls:1,vars:2,consts:[[3,"type","categoryType"]],template:function(l,T){1&l&&p._UZ(0,"app-category",0),2&l&&p.Q6J("type","edit")("categoryType",T.categoryType)},dependencies:[g.m]})}return y})()},766:(C,f,n)=>{n.d(f,{N:()=>g});var p=n(9212);let g=(()=>{class d{constructor(e){this._el=e}onInputChange(e){const s=this._el.nativeElement.value;this._el.nativeElement.value=s.replace(/[^0-9]*/g,""),s!==this._el.nativeElement.value&&e.stopPropagation()}static#e=this.\u0275fac=function(s){return new(s||d)(p.Y36(p.SBq))};static#t=this.\u0275dir=p.lG2({type:d,selectors:[["input","numbersOnly",""]],hostBindings:function(s,l){1&s&&p.NdJ("input",function(_){return l.onInputChange(_)})}})}return d})()}}]);