"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[802],{5802:(J,Z,a)=>{a.r(Z),a.d(Z,{PageModule:()=>X});var g=a(6814),r=a(186),T=a(9299),u=a(6505),h=a(7582),C=a(6501),f=a(9731),t=a(9212),y=a(1427),d=a(7243),p=a(4274),P=a(9515);const l=()=>["/page/create"];function o(s,e){1&s&&(t.TgZ(0,"div",3)(1,"a",4),t._UZ(2,"i",5),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&s&&(t.xp6(1),t.Q6J("routerLink",t.DdM(4,l)),t.xp6(2),t.hij(" ",t.lcZ(4,2,"add_page")," "))}class n{constructor(e,c){this.store=e,this.router=c,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"page.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"page.destroy"}],data:[],total:0}}ngOnInit(){this.page$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new f.E9(e))}onActionClicked(e){"edit"==e.actionToPerform?this.edit(e.data):"status"==e.actionToPerform?this.status(e.data):"delete"==e.actionToPerform?this.delete(e.data):"deleteAll"==e.actionToPerform&&this.deleteAll(e.data)}edit(e){this.router.navigateByUrl(`/page/edit/${e.id}`)}status(e){this.store.dispatch(new f.ov(e.id,e.status))}delete(e){this.store.dispatch(new f.b3(e.id))}deleteAll(e){this.store.dispatch(new f._z(e))}static#t=this.\u0275fac=function(c){return new(c||n)(t.Y36(r.yh),t.Y36(u.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-page"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableConfig","hasCheckbox","tableChanged","rowClicked","action"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(c,i){1&c&&(t.TgZ(0,"app-page-wrapper",0),t.YNc(1,o,5,5,"div",1),t.TgZ(2,"app-table",2),t.NdJ("tableChanged",function(A){return i.onTableChange(A)})("rowClicked",function(A){return i.edit(A)})("action",function(A){return i.onActionClicked(A)}),t.qZA()()),2&c&&(t.Q6J("gridClass","col-sm-12")("title","pages"),t.xp6(1),t.Q6J("hasPermission","page.create"),t.xp6(1),t.Q6J("tableConfig",i.tableConfig)("hasCheckbox",!0))},dependencies:[u.rH,y.a,d.t,p.A,P.X$]})}(0,h.gn)([(0,r.Ph)(C.U.page)],n.prototype,"page$",void 0);var m=a(6223),x=a(8645),S=a(2096),Q=a(4664),N=a(1631),I=a(9773),L=a(7930),$=a(885),B=a(3092),Y=a(8176),z=a(2879);function E(s,e){1&s&&(t.TgZ(0,"div",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"title_is_required")," "))}class b{constructor(e,c,i,v){this.store=e,this.route=c,this.router=i,this.formBuilder=v,this.editor=L,this.config=$.v,this.destroy$=new x.x,this.form=this.formBuilder.group({title:new m.NI("",[m.kI.required]),content:new m.NI,meta_title:new m.NI,meta_description:new m.NI,page_meta_image_id:new m.NI,status:new m.NI(1)})}ngOnInit(){this.route.params.pipe((0,Q.w)(e=>e.id?this.store.dispatch(new f.eF(e.id)).pipe((0,N.z)(()=>this.store.select(C.U.selectedPage))):(0,S.of)()),(0,I.R)(this.destroy$)).subscribe(e=>{this.id=e?.id,this.form.patchValue({title:e?.title,content:e?.content,meta_title:e?.meta_title,meta_description:e?.meta_description,status:e?.status})})}selectMetaImage(e){Array.isArray(e)||this.form.controls.page_meta_image_id.setValue(e?e.id:null)}submit(){this.form.markAllAsTouched();let e=new f.Bb(this.form.value);"edit"==this.type&&this.id&&(e=new f.WP(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/page")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(c){return new(c||b)(t.Y36(r.yh),t.Y36(u.gz),t.Y36(u.F0),t.Y36(m.qu))};static#e=this.\u0275cmp=t.Xpm({type:b,selectors:[["app-form-page"]],inputs:{type:"type"},decls:24,vars:39,consts:[[1,"theme-form","theme-form-2","mega-form",3,"formGroup","ngSubmit"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","content",3,"editor","config"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"multipleImage","image","selectedFiles"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"]],template:function(c,i){if(1&c&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(1,"app-form-fields",1),t._UZ(2,"input",2),t.ALo(3,"translate"),t.YNc(4,E,3,3,"div",3),t.qZA(),t.TgZ(5,"app-form-fields",1),t._UZ(6,"ckeditor",4),t.qZA(),t.TgZ(7,"app-form-fields",1),t._UZ(8,"input",5),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"app-form-fields",1),t._UZ(11,"textarea",6),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"app-form-fields",1)(14,"app-image-upload",7),t.NdJ("selectedFiles",function(A){return i.selectMetaImage(A)}),t.ALo(15,"async"),t.qZA()(),t.TgZ(16,"app-form-fields",1)(17,"div",8)(18,"label",9),t._UZ(19,"input",10)(20,"span",11),t.qZA()()(),t.TgZ(21,"app-button",12),t._uU(22),t.ALo(23,"translate"),t.qZA()()),2&c){let v;t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("label","title")("for","title")("required",!0),t.xp6(1),t.s9C("placeholder",t.lcZ(3,29,"enter_title")),t.xp6(2),t.Q6J("ngIf",i.form.controls.title.touched&&(null==i.form.controls.title.errors?null:i.form.controls.title.errors.required)),t.xp6(1),t.Q6J("label","content")("for","content")("required",!1),t.xp6(1),t.Q6J("editor",i.editor)("config",i.config),t.xp6(1),t.Q6J("label","meta_title")("for","metatitle")("required",!1),t.xp6(1),t.s9C("placeholder",t.lcZ(9,31,"enter_meta_title")),t.xp6(2),t.Q6J("label","meta_description")("for","desc")("required",!1),t.xp6(1),t.s9C("placeholder",t.lcZ(12,33,"enter_meta_description")),t.xp6(2),t.Q6J("label","meta_image")("for","meta_image")("required",!1),t.xp6(1),t.Q6J("multipleImage",!1)("image",null==(v=t.lcZ(15,35,i.page$))?null:v.page_meta_image),t.xp6(2),t.Q6J("label","Status")("for","status")("required",!1),t.xp6(5),t.Q6J("id","page_btn"),t.xp6(1),t.hij(" ",t.lcZ(23,37,"create"==i.type?"save_page":"update_page")," ")}},dependencies:[g.O5,m._Y,m.Fj,m.Wl,m.JJ,m.JL,m.sg,m.u,B.L,Y.J,z.r,T.u,g.Ov,P.X$]})}(0,h.gn)([(0,r.Ph)(C.U.selectedPage)],b.prototype,"page$",void 0);let M=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-create-page"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,v){1&i&&(t.TgZ(0,"app-page-wrapper",0),t._UZ(1,"app-form-page",1),t.qZA()),2&i&&(t.Q6J("title","create_page"),t.xp6(1),t.Q6J("type","create"))},dependencies:[d.t,b]})}return s})(),w=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-edit-page"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,v){1&i&&(t.TgZ(0,"app-page-wrapper",0),t._UZ(1,"app-form-page",1),t.qZA()),2&i&&(t.Q6J("title","update_page"),t.xp6(1),t.Q6J("type","edit"))},dependencies:[d.t,b]})}return s})();var F=a(5419);const D=[{path:"",component:n,canActivate:[F.n],data:{permission:"page.index"}},{path:"create",component:M,canActivate:[F.n],data:{permission:["page.index","page.create"]}},{path:"edit/:id",component:w,canActivate:[F.n],data:{permission:["page.index","page.edit"]}}];let G=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.oAB({type:s});static#a=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(D),u.Bz]})}return s})();var j=a(6208);let X=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.oAB({type:s});static#a=this.\u0275inj=t.cJS({imports:[g.ez,G,j.m,r.$l.forFeature([C.U]),T.d]})}return s})()},9731:(J,Z,a)=>{a.d(Z,{Bb:()=>r,E9:()=>g,WP:()=>u,_z:()=>f,b3:()=>C,eF:()=>T,ov:()=>h});let g=(()=>{class t{static#t=this.type="[Page] Get";constructor(d){this.payload=d}}return t})(),r=(()=>{class t{static#t=this.type="[Page] Create";constructor(d){this.payload=d}}return t})(),T=(()=>{class t{static#t=this.type="[Page] Edit";constructor(d){this.id=d}}return t})(),u=(()=>{class t{static#t=this.type="[Page] Update";constructor(d,p){this.payload=d,this.id=p}}return t})(),h=(()=>{class t{static#t=this.type="[Page] Update Status";constructor(d,p){this.id=d,this.status=p}}return t})(),C=(()=>{class t{static#t=this.type="[Page] Delete";constructor(d){this.id=d}}return t})(),f=(()=>{class t{static#t=this.type="[Page] Delete All";constructor(d){this.ids=d}}return t})()},6501:(J,Z,a)=>{a.d(Z,{U:()=>p});var g=a(7582),r=a(186),T=a(9397),u=a(9731),h=a(9212),C=a(3477),f=a(553),t=a(9862);let y=(()=>{class P{constructor(o){this.http=o}getPages(o){return this.http.get(`${f.N.URL}/page.json`,{params:o})}static#t=this.\u0275fac=function(n){return new(n||P)(h.LFG(t.eN))};static#e=this.\u0275prov=h.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})(),p=class U{constructor(l,o,n){this.store=l,this.notificationService=o,this.pageService=n}static page(l){return l.page}static pages(l){return l.page.data.map(o=>({label:o?.title,value:o?.id}))}static selectedPage(l){return l.selectedPage}getPages(l,o){return this.pageService.getPages(o.payload).pipe((0,T.b)({next:n=>{l.patchState({page:{data:n.data,total:n?.total?n?.total:n.data?.length}})},error:n=>{throw new Error(n?.error?.message)}}))}create(l,o){}edit(l,{id:o}){const n=l.getState(),m=n.page.data.find(x=>x.id==o);l.patchState({...n,selectedPage:m})}update(l,{}){}updateStatus(l,{}){}delete(l,{}){}deleteAll(l,{}){}static#t=this.\u0275fac=function(o){return new(o||U)(h.LFG(r.yh),h.LFG(C.g),h.LFG(y))};static#e=this.\u0275prov=h.Yz7({token:U,factory:U.\u0275fac})};(0,g.gn)([(0,r.aU)(u.E9)],p.prototype,"getPages",null),(0,g.gn)([(0,r.aU)(u.Bb)],p.prototype,"create",null),(0,g.gn)([(0,r.aU)(u.eF)],p.prototype,"edit",null),(0,g.gn)([(0,r.aU)(u.WP)],p.prototype,"update",null),(0,g.gn)([(0,r.aU)(u.ov)],p.prototype,"updateStatus",null),(0,g.gn)([(0,r.aU)(u.b3)],p.prototype,"delete",null),(0,g.gn)([(0,r.aU)(u._z)],p.prototype,"deleteAll",null),(0,g.gn)([(0,r.Qf)()],p,"page",null),(0,g.gn)([(0,r.Qf)()],p,"pages",null),(0,g.gn)([(0,r.Qf)()],p,"selectedPage",null),p=(0,g.gn)([(0,r.ZM)({name:"page",defaults:{page:{data:[],total:0},selectedPage:null}})],p)}}]);